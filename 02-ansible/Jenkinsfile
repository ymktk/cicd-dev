def ANSIBLE_CONFIG = """\
[defaults]
log_path = ./ansible.log
"""

pipeline {
  agent {
    docker 'ymktk/ansible:ansible-2.9.5-centos'
  }

  stages() {

    stage('1. Greeting') {
      steps {
        echo 'Hello world'
      }
    }

    // stage('2. Get ansible files') {
    //   steps {
    //     deleteDir()
    //     git 'git@github.com:ymktk/jenkins.git'
    //     writeFile(file: "ansible.cfg", text: "${ANSIBLE_CONFIG}")
    //   }
    // }

    stage('3. Executions') {
      steps() {
        sh 'ls -lR'
      }

      // post {
      //   always {
      //     archiveArtifacts 'ansible.log'
      //   }
      // }

    }
  } // End Stages

  post {
    success {
      cleanWs()
    }
  }

}
